<?php    /*Template Name:Video Fullscreen*/    get_header();?><div class="capture <?php echo $slide["captions_skin"] == "Dark" ? "dark-captions" : "";?>">	<h2 class="fadeIn animated"><?php the_field("big_label_text"); ?></h2>	<h3 class="fadeIn animated"><?php the_field("small_label_text"); ?></h3>	<br style="clear: both"/>	<?php if(get_field("button_text") && get_field("button_url")): ?>		<a class="button_s fadeIn animated" href="<?php the_field("button_url"); ?>"><?php the_field("button_text"); ?></a>	<?php endif; ?></div><div class="video_fullscreen">	<div class="img_overlay" style="opacity: <?php echo get_field("overlay_opacity") ? get_field("overlay_opacity") : "0.5"; ?>;background: <?php echo get_field("overlay_color") ? get_field("overlay_color") : "#000"; ?>"></div>	<!--Video Container-->		<?php        $url = get_field("video_url");        $youtube = "";        $vimeo = "";        if($url):            preg_match("#(?<=v=)[a-zA-Z0-9-]+(?=&)|(?<=v\/)[^&\n]+|(?<=v=)[^&\n]+|(?<=youtu.be/)[^&\n]+#", $url, $youtube);            sscanf(parse_url($url, PHP_URL_PATH), '/%d', $vimeo);            if($vimeo):                ?>                <iframe class="vimeo" src="http://player.vimeo.com/video/<?php echo $vimeo; ?>?api=1" width="100%" height="100%" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>            <?php else: ?>                <div id="ov_vid" data-vid="<?php echo $youtube[0]; ?>"></div>            <?php endif; ?>        <?php endif; ?>	<!--Video Container--></div><script type="text/javascript">        var onMessageReceived;        var url;        var onYouTubeIframeAPIReady;        jQuery(document).ready(function($){            /*Vimeo API*/            var f = jQuery('iframe.vimeo');            if(f.length){                url = f.attr('src').split('?')[0];                onMessageReceived = function(e) {                    var data = JSON.parse(e.data);                    switch (data.event) {                        case 'ready':                            onReady();                            break;                    }                }                function onReady() {                    post("play","");                    post("setLoop","1");                    post("setVolume",parseFloat("0.0000000001") * 10);                    center_video($("iframe.vimeo"));                }                if (window.addEventListener) {                    window.addEventListener('message', onMessageReceived, false);                }                else{                    window.attachEvent('onmessage', onMessageReceived, false);                }                function post(action, value) {                    var data = { method: action };                    if (value) {                        data.value = value;                    }                    f[0].contentWindow.postMessage(JSON.stringify(data), url);                }            }            /*Vimeo API*/            /*Youtube API*/            var player;            if(jQuery("#ov_vid").length){                onYouTubeIframeAPIReady = function() {                    var vid = jQuery("#ov_vid").data("vid");                    try{                        if(typeof YT === 'object'){                            player = new YT.Player('ov_vid', {                                height: '100%',                                width: '100%',                                videoId: vid,                                playerVars: { 'h1' : 1 , 'modestbranding' : 0, 'disablekb' : 1, 'autoplay': 1, 'controls': 0, 'playlist': vid, 'loop': 1, 'showinfo': 0, 'wmode': 'transparent' , 'iv_load_policy' : '3'},                                events: {                                    'onReady': onPlayerReady                                }                            });                        }                    }catch(err){                    }                }                function onPlayerReady(event) {                    event.target.setVolume(parseFloat("0.0000000001") * 10);                    center_video($("#ov_vid"));                }            }            /*Youtube API*/            $(".inner_content").waitForImages(function(){                //$(".inner_content").css("height",$(window).height());                if(jQuery("#ov_vid").length){                    onYouTubeIframeAPIReady();                }            });            $(window).resize(function(){                //$(".inner_content").css("height",$(window).height());            });        });</script><?php get_footer(); ?>